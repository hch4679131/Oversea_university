# å¯èˆªç•™å­¦ - Scrapy çˆ¬è™«é›†æˆå¿«é€ŸæŒ‡å—

## ğŸ“‹ é¡¹ç›®æ›´æ–°

å·²å°†ä¸“ä¸šçš„ **Scrapy çˆ¬è™«** é›†æˆåˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œç”¨äºç›‘æ§é¦™æ¸¯å¤§å­¦æ–‡å­¦é™¢æœ€æ–°åŠ¨æ€ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ Node.js æœåŠ¡å™¨ï¼ˆç…§å¸¸ï¼‰
```bash
node server.js
```

### 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ HKU çˆ¬è™«ï¼ˆ30ç§’æ£€æµ‹ä¸€æ¬¡ï¼‰
```bash
python hku_scraper_runner.py
```

çˆ¬è™«ä¼šï¼š
- æ¯ 30 ç§’è®¿é—®ä¸€æ¬¡ HKU æ–‡å­¦é™¢ç½‘ç«™
- æ£€æµ‹æ–°é—»åˆ—è¡¨æ˜¯å¦æœ‰æ›´æ–°
- è‡ªåŠ¨çˆ¬å–æ–°å¢æ–°é—»çš„è¯¦æƒ…é¡µï¼ˆæ–‡å­— + å›¾ç‰‡ï¼‰
- ä¿å­˜æ•°æ®åˆ° `%USERPROFILE%/Desktop/hku_news_data/`

### 3. é€šè¿‡ API æŸ¥è¯¢çˆ¬å–ç»“æœ

#### è·å–æ–°é—»åˆ—è¡¨
```bash
curl http://localhost:3000/api/hku-news
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "data": [
    {
      "title": "HKU Arts Collaborates with HKMOA...",
      "url": "https://arts.hku.hk/news/...",
      "scraped_at": "2025-12-03T10:30:45.123Z",
      "file": "1_article.json"
    },
    ...
  ],
  "total": 5
}
```

#### è·å–å…·ä½“æ–°é—»è¯¦æƒ…
```bash
# è·å–ç¬¬ 1 ç¯‡æ–‡ç« 
curl http://localhost:3000/api/hku-news/1
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "data": {
    "title": "HKU Arts Collaborates with HKMOA...",
    "url": "https://arts.hku.hk/news/...",
    "text": "æ–‡ç« å…¨æ–‡å†…å®¹...",
    "images": [
      "https://arts.hku.hk/img1.jpg",
      "https://arts.hku.hk/img2.jpg"
    ],
    "scraped_at": "2025-12-03T10:30:45.123Z",
    "status": "completed"
  }
}
```

#### æ‰‹åŠ¨è§¦å‘çˆ¬è™«
```bash
# ç«‹å³è¿è¡Œä¸€æ¬¡çˆ¬è™«ï¼ˆå¼‚æ­¥ï¼Œä¸ä¼šé˜»å¡ï¼‰
curl -X POST http://localhost:3000/api/hku-scrape
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "message": "çˆ¬è™«ä»»åŠ¡å·²å¯åŠ¨ï¼Œé¢„è®¡ 30 ç§’å®Œæˆé¦–æ¬¡æ£€æµ‹"
}
```

## ğŸ“ æ•°æ®å­˜å‚¨ä½ç½®

æ‰€æœ‰çˆ¬å–æ•°æ®å­˜å‚¨åœ¨ï¼š
```
C:\Users\<YourUsername>\Desktop\hku_news_data\
â”œâ”€â”€ news_index.json        # æ–°é—»ç´¢å¼•ï¼ˆé˜²é‡å¤ï¼‰
â”œâ”€â”€ 1_article.json         # ç¬¬ 1 ç¯‡æ–‡ç« 
â”œâ”€â”€ 2_article.json         # ç¬¬ 2 ç¯‡æ–‡ç« 
â””â”€â”€ ...
```

æ¯ä¸ªæ–‡ç« æ–‡ä»¶åŒ…å«ï¼š
- `title` - æ–‡ç« æ ‡é¢˜
- `url` - åŸæ–‡é“¾æ¥
- `text` - æ–‡ç« å…¨æ–‡ï¼ˆæœ€å¤š 5000 å­—ï¼‰
- `images` - æ–‡ç« ä¸­æ‰€æœ‰å›¾ç‰‡ URLï¼ˆæœ€å¤š 10 å¼ ï¼‰
- `scraped_at` - çˆ¬å–æ—¶é—´æˆ³

## ğŸ”§ é…ç½®è°ƒæ•´

å¦‚éœ€ä¿®æ”¹çˆ¬è™«å‚æ•°ï¼Œç¼–è¾‘ `hku_scraper_runner.py`ï¼š

```python
interval = 30  # ä¿®æ”¹æ£€æµ‹é—´éš”ï¼ˆå•ä½ï¼šç§’ï¼‰
```

## ğŸ“Š å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node.js Server  â”‚  æä¾› Web ç•Œé¢å’Œ API
â”‚  :3000          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ GET  /api/hku-news      â†’ æŸ¥è¯¢æ–°é—»åˆ—è¡¨
         â”œâ”€ GET  /api/hku-news/:id  â†’ æŸ¥è¯¢æ–‡ç« è¯¦æƒ…
         â””â”€ POST /api/hku-scrape    â†’ æ‰‹åŠ¨è§¦å‘
         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scrapy Scraper  â”‚  åå°ç›‘æ§ HKU æ–°é—»
â”‚  æ¯ 30 ç§’è¿è¡Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€ ä¿å­˜æ•°æ®åˆ°
            ~/Desktop/hku_news_data/
```

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

âœ… **è‡ªåŠ¨ç›‘æ§** - æ¯ 30 ç§’æ£€æµ‹ä¸€æ¬¡æ˜¯å¦æœ‰æ–°é—»æ›´æ–°
âœ… **æ™ºèƒ½å»é‡** - ç»´æŠ¤ç´¢å¼•é¿å…é‡å¤çˆ¬å–ç›¸åŒ URL
âœ… **è¯¦æƒ…æŠ“å–** - è‡ªåŠ¨è¿›å…¥æ–‡ç« é¡µé¢æŠ“å–å®Œæ•´æ–‡å­—å’Œå›¾ç‰‡
âœ… **å¼‚æ­¥å¤„ç†** - çˆ¬è™«åå°è¿è¡Œï¼Œä¸é˜»å¡ Web æœåŠ¡
âœ… **æ•°æ®æŒä¹…åŒ–** - ç»“æœä¿å­˜åˆ° JSON æ–‡ä»¶ï¼Œæ”¯æŒæŸ¥è¯¢

## ğŸ› æ•…éšœæ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|--------|
| çˆ¬è™«æ— æ³•è¿æ¥ HKU | æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå¯èƒ½éœ€è¦é…ç½®ä»£ç† |
| æ–°é—»åˆ—è¡¨ä¸ºç©º | HKU ç½‘é¡µç»“æ„å¯èƒ½å˜æ›´ï¼Œéœ€è¦è°ƒæ•´ CSS é€‰æ‹©å™¨ |
| é‡å¤çˆ¬å–ç›¸åŒæ–‡ç«  | æ£€æŸ¥ `news_index.json` æ˜¯å¦æ­£å¸¸ä¿å­˜ |
| çˆ¬è™«é€Ÿåº¦æ…¢ | åœ¨ `hku_scraper/settings.py` ä¸­è°ƒæ•´å¹¶å‘æ•°å’Œå»¶è¿Ÿ |

## ğŸ“š æ–‡ä»¶è¯´æ˜

- `hku_scraper/` - Scrapy çˆ¬è™«åŒ…
  - `spiders/hku_arts_spider.py` - ä¸»çˆ¬è™«é€»è¾‘
  - `settings.py` - Scrapy é…ç½®
- `hku_scraper_runner.py` - å®šæ—¶è¿è¡Œå™¨
- `HKU_SCRAPER_README.md` - è¯¦ç»†æ–‡æ¡£
- `server.js` - Node.js æœåŠ¡å™¨ï¼ˆå·²é›†æˆ HKU APIï¼‰

## ğŸ”® åç»­æ‰©å±•

- [ ] æ·»åŠ æ•°æ®åº“æ”¯æŒæ›¿ä»£ JSON æ–‡ä»¶
- [ ] æ”¯æŒ JavaScript æ¸²æŸ“çš„åŠ¨æ€å†…å®¹ï¼ˆSelenium/Playwrightï¼‰
- [ ] æ·»åŠ ä»£ç†æ± é˜²æ­¢ IP è¢«å°
- [ ] æ”¯æŒå¤šä¸ªå­¦é™¢å¹¶å‘çˆ¬è™«
- [ ] å‰ç«¯ä»ªè¡¨æ¿å±•ç¤ºçˆ¬å–æ•°æ®
- [ ] é‚®ä»¶/å¾®ä¿¡é€šçŸ¥æ–°å¢æ–°é—»

---

**æç¤º**ï¼šçˆ¬è™«ä»»åŠ¡å¯ä»¥é•¿æœŸè¿è¡Œï¼Œå»ºè®®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä»¥å®ç°å…¨å¤©å€™ç›‘æ§ã€‚
