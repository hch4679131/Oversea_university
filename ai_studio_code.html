<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‡ç”Ÿæ´»ç•™å­¦ | ä½ çš„åæ ¡æ¢¦å·¥åœº</title>
    <!-- å¼•å…¥ Tailwind CSS (CDNæ–¹å¼ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®æœ¬åœ°æ„å»º) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            light: '#3b82f6',
                            DEFAULT: '#1e40af', // æ·±è“
                            dark: '#1e3a8a',
                            accent: '#f97316', // æ©™è‰²
                        }
                    }
                }
            }
        }
    </script>
    <!-- å¼•å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; }
        .hero-bg {
            background-image: linear-gradient(rgba(30, 64, 175, 0.7), rgba(30, 58, 138, 0.8)), url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-position: center;
        }
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            max-width: 400px;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 9999;
            animation: slideIn 0.3s ease-out;
        }
        .toast.success { background: #10b981; color: white; }
        .toast.error { background: #ef4444; color: white; }
        .toast.loading { background: #3b82f6; color: white; }
        @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white shadow-md fixed w-full z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- LOGO -->
            <div class="flex items-center space-x-2">
                <svg class="w-8 h-8 text-brand" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path></svg>
                <span class="text-2xl font-bold text-brand-dark">æ±‡ç”Ÿæ´»ç•™å­¦</span>
            </div>
            
            <!-- èœå• (æ¡Œé¢ç«¯) -->
            <div class="hidden md:flex space-x-8 items-center font-medium">
                <a href="#" class="text-gray-600 hover:text-brand transition">é¦–é¡µ</a>
                <a href="#services" class="text-gray-600 hover:text-brand transition">æœåŠ¡ä½“ç³»</a>
                <a href="#countries" class="text-gray-600 hover:text-brand transition">çƒ­é—¨å›½å®¶</a>
                <a href="#cases" class="text-gray-600 hover:text-brand transition">æˆåŠŸæ¡ˆä¾‹</a>
                <a href="#contact" class="bg-brand-accent hover:bg-orange-600 text-white px-6 py-2 rounded-full transition shadow-lg">å…è´¹è¯„ä¼°</a>
            </div>
        </div>
    </nav>

    <!-- é¦–å± Hero Section -->
    <header class="hero-bg h-screen flex items-center justify-center text-white pt-16">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 leading-tight">
                è¿æ¥ä¸–ç•Œï¼Œ<br class="md:hidden">æˆå°±ä½ çš„<span class="text-brand-accent">æ— é™å¯èƒ½</span>
            </h1>
            <p class="text-lg md:text-xl mb-10 text-gray-200 max-w-2xl mx-auto">
                ä¸“æ³¨æ¸¯è‹±ç¾æ¾³åŠ é«˜ç«¯ç•™å­¦ç”³è¯·ï¼Œ9å¹´ç»éªŒï¼Œç´¯è®¡å¸®åŠ© 9000+ å­¦å­åœ†æ¢¦ä¸–ç•Œåæ ¡ã€‚
            </p>
            <div class="flex flex-col md:flex-row justify-center gap-4">
                <a href="#contact" class="bg-brand-accent hover:bg-orange-600 text-white px-8 py-4 rounded-lg text-lg font-semibold transition shadow-lg">
                    ç«‹å³è§„åˆ’ç•™å­¦æ–¹æ¡ˆ
                </a>
                <a href="#cases" class="bg-transparent border-2 border-white hover:bg-white hover:text-brand-dark px-8 py-4 rounded-lg text-lg font-semibold transition">
                    æŸ¥çœ‹åæ ¡å½•å–æ¦œ
                </a>
                <button data-scrape 
                        data-scrape-url="https://arts.hku.hk/news/---hkuarts-collaborates-with-hkmoa-and-conservation-office-of-the-lcsd-to-launch-douglas-so-post-doctoral-fellowship-in-art-conservation-attracting-global-talent-for-scientific-analysis-of-chinese-paintings-research-fellowship-project"
                        data-scrape-filename="hku_test"
                        class="bg-yellow-500 hover:bg-yellow-600 text-white px-8 py-4 rounded-lg text-lg font-semibold transition shadow-lg">
                    ğŸ§ª çˆ¬è™«æŠ“å– (HKU)
            </div>
            
            <!-- æ•°æ®å±•ç¤º -->
            <div class="mt-16 grid grid-cols-3 gap-4 md:gap-12 max-w-4xl mx-auto border-t border-white/20 pt-8">
                <div>
                    <div class="text-3xl md:text-4xl font-bold text-brand-accent">98.9%</div>
                    <div class="text-sm md:text-base text-gray-300">åæ ¡å½•å–ç‡</div>
                </div>
                <div>
                    <div class="text-3xl md:text-4xl font-bold text-brand-accent">9000+</div>
                    <div class="text-sm md:text-base text-gray-300">æˆåŠŸæ¡ˆä¾‹</div>
                </div>
                <div>
                    <div class="text-3xl md:text-4xl font-bold text-brand-accent">9yr</div>
                    <div class="text-sm md:text-base text-gray-300">è¡Œä¸šç»éªŒ</div>
                </div>
            </div>
        </div>
    </header>

    <!-- æœåŠ¡æµç¨‹ -->
    <section id="services" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-brand-dark mb-4">ä¸€ç«™å¼ç•™å­¦æœåŠ¡ä½“ç³»</h2>
                <div class="w-20 h-1 bg-brand-accent mx-auto"></div>
                <p class="mt-4 text-gray-600">ä»è§„åˆ’åˆ°å…¥å­¦ï¼Œæˆ‘ä»¬å…¨ç¨‹é™ªä¼´</p>
            </div>

            <div class="grid md:grid-cols-4 gap-8">
                <!-- å¡ç‰‡ 1 -->
                <div class="p-8 border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition hover:-translate-y-2 bg-white">
                    <div class="w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-6 text-brand">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">èƒŒæ™¯æå‡è§„åˆ’</h3>
                    <p class="text-gray-500 text-sm leading-relaxed">æ ¹æ®ç›®æ ‡é™¢æ ¡è¦æ±‚ï¼Œå®šåˆ¶å­¦æœ¯ç§‘ç ”ã€å®ä¹ å®è·µæ–¹æ¡ˆï¼Œæå‡è½¯ç¡¬å®åŠ›ã€‚</p>
                </div>
                
                <!-- å¡ç‰‡ 2 -->
                <div class="p-8 border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition hover:-translate-y-2 bg-white">
                    <div class="w-14 h-14 bg-orange-100 rounded-full flex items-center justify-center mb-6 text-brand-accent">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">æ–‡ä¹¦æ·±åº¦æ‰“ç£¨</h3>
                    <p class="text-gray-500 text-sm leading-relaxed">å¤–ç±å¯¼å¸ˆæ¶¦è‰²ï¼ŒæŒ–æ˜ä¸ªäººäº®ç‚¹ï¼Œæ‹’ç»æ¨¡æ¿åŒ–ï¼Œæ‰“é€ ç‹¬ä¸€æ— äºŒçš„ç”³è¯·æ–‡ä¹¦ã€‚</p>
                </div>

                <!-- å¡ç‰‡ 3 -->
                <div class="p-8 border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition hover:-translate-y-2 bg-white">
                    <div class="w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-6 text-brand">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">ç²¾å‡†é€‰æ ¡å®šä½</h3>
                    <p class="text-gray-500 text-sm leading-relaxed">åŸºäºå¤§æ•°æ®åˆ†æï¼Œç»“åˆä¸ªäººæ„æ„¿ä¸èŒä¸šè§„åˆ’ï¼Œç§‘å­¦åˆ¶å®šå†²åˆºã€åŒ¹é…ã€ä¿åº•æ–¹æ¡ˆã€‚</p>
                </div>

                <!-- å¡ç‰‡ 4 -->
                <div class="p-8 border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition hover:-translate-y-2 bg-white">
                    <div class="w-14 h-14 bg-orange-100 rounded-full flex items-center justify-center mb-6 text-brand-accent">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-3">å…¨ç¨‹é™ªä¼´æœåŠ¡</h3>
                    <p class="text-gray-500 text-sm leading-relaxed">ä»ç”³è¯·åˆ°è½åœ°ï¼Œä¸“ä¸šå›¢é˜Ÿå…¨ç¨‹è·Ÿè¿›ï¼Œç­”ç–‘è§£æƒ‘ï¼Œç¡®ä¿å½•å–åæ— å¿§å¯èˆªã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- æˆåŠŸæ¡ˆä¾‹ Section -->
    <section id="cases" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-brand-dark mb-4">åæ ¡å½•å–æ¦œ</h2>
                <div class="w-20 h-1 bg-brand-accent mx-auto"></div>
                <p class="mt-4 text-gray-600">éƒ¨åˆ†å­¦ç”Ÿå½•å–å­¦æ ¡ & å¥–å­¦é‡‘æƒ…å†µ</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <div class="text-2xl font-bold text-brand mb-2">Harvard University</div>
                    <div class="text-gray-600">å“ˆä½›å¤§å­¦</div>
                    <div class="mt-4 text-sm text-gray-500">Master of Business Administration</div>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <div class="text-2xl font-bold text-brand mb-2">Stanford University</div>
                    <div class="text-gray-600">æ–¯å¦ç¦å¤§å­¦</div>
                    <div class="mt-4 text-sm text-gray-500">Master of Computer Science</div>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <div class="text-2xl font-bold text-brand mb-2">MIT</div>
                    <div class="text-gray-600">éº»çœç†å·¥å­¦é™¢</div>
                    <div class="mt-4 text-sm text-gray-500">Master of Engineering</div>
                </div>
            </div>
        </div>
    </section>

    <!-- è”ç³»æ–¹å¼ Section -->
    <section id="contact" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-brand-dark mb-4">å‡†å¤‡å¥½å¼€å¯ä½ çš„ç•™å­¦ä¹‹æ—…äº†å—ï¼Ÿ</h2>
                <div class="w-20 h-1 bg-brand-accent mx-auto"></div>
                <p class="mt-4 text-gray-600 mb-8 max-w-2xl mx-auto">æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿéšæ—¶å‡†å¤‡ä¸ºä½ è§£ç­”å…³äºç•™å­¦ç”³è¯·çš„æ‰€æœ‰é—®é¢˜ã€‚è”ç³»æˆ‘ä»¬è·å¾—ä¸€å¯¹ä¸€çš„å…è´¹å’¨è¯¢ã€‚</p>
                
                <div class="grid md:grid-cols-3 gap-8 mt-12">
                    <div>
                        <div class="text-4xl mb-4">ğŸ“±</div>
                        <h3 class="text-xl font-bold mb-2">ç”µè¯</h3>
                        <p class="text-gray-600">+86 123-4567-8901</p>
                    </div>
                    <div>
                        <div class="text-4xl mb-4">âœ‰ï¸</div>
                        <h3 class="text-xl font-bold mb-2">é‚®ç®±</h3>
                        <p class="text-gray-600">huishenghuo_liuxue.com</p>
                    </div>
                    <div>
                        <div class="text-4xl mb-4">ğŸ“</div>
                        <h3 class="text-xl font-bold mb-2">åœ°å€</h3>
                        <p class="text-gray-600">é¦™æ¸¯æ²¹éº»åœ°</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ç®€æ˜“è®¤è¯ UI Section -->
    <section id="auth" class="py-16 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-2xl font-bold text-brand-dark mb-4">å¿«é€Ÿæ³¨å†Œ / ç™»å½•</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="p-6 border rounded-xl bg-gray-50">
                    <h3 class="text-xl font-semibold mb-4">æ‰‹æœºå·éªŒè¯</h3>
                    <div class="grid gap-3">
                        <input id="auth-phone" type="text" placeholder="æ‰‹æœºå·" class="px-4 py-2 border rounded-md" />
                        <select id="auth-purpose" class="px-4 py-2 border rounded-md">
                            <option value="register">æ³¨å†Œ</option>
                            <option value="reset_password">é‡ç½®å¯†ç </option>
                            <option value="login">ç™»å½•</option>
                        </select>
                        <button id="auth-send-code" class="bg-brand-accent text-white px-4 py-2 rounded-md">å‘é€éªŒè¯ç </button>
                        <input id="auth-code" type="text" placeholder="éªŒè¯ç " class="px-4 py-2 border rounded-md" />
                        <button id="auth-verify-code" class="bg-brand text-white px-4 py-2 rounded-md">éªŒè¯éªŒè¯ç </button>
                    </div>
                </div>
                <div class="p-6 border rounded-xl bg-gray-50">
                    <h3 class="text-xl font-semibold mb-4">æ³¨å†Œ / ç™»å½•</h3>
                    <div class="grid gap-3">
                        <input id="auth-password" type="password" placeholder="è®¾ç½®å¯†ç ï¼ˆæ³¨å†Œï¼‰" class="px-4 py-2 border rounded-md" />
                        <input id="auth-idcard" type="text" placeholder="èº«ä»½è¯å·ï¼ˆå¯é€‰ï¼‰" class="px-4 py-2 border rounded-md" />
                        <input id="auth-idname" type="text" placeholder="å§“åï¼ˆå¯é€‰ï¼‰" class="px-4 py-2 border rounded-md" />
                        <button id="auth-register" class="bg-green-600 text-white px-4 py-2 rounded-md">æ³¨å†Œ</button>
                        <hr class="my-2" />
                        <input id="login-phone" type="text" placeholder="æ‰‹æœºå·ï¼ˆç™»å½•ï¼‰" class="px-4 py-2 border rounded-md" />
                        <input id="login-password" type="password" placeholder="å¯†ç ï¼ˆç™»å½•ï¼‰" class="px-4 py-2 border rounded-md" />
                        <button id="auth-login" class="bg-blue-600 text-white px-4 py-2 rounded-md">ç™»å½•</button>
                        <input id="reset-password" type="password" placeholder="æ–°å¯†ç ï¼ˆé‡ç½®ï¼‰" class="px-4 py-2 border rounded-md" />
                        <button id="auth-reset" class="bg-yellow-500 text-white px-4 py-2 rounded-md">é‡ç½®å¯†ç </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="bg-brand-dark text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 æ±‡ç”Ÿæ´»ç•™å­¦. All rights reserved. | <a href="#" class="hover:text-brand-accent">éšç§æ”¿ç­–</a> | <a href="#" class="hover:text-brand-accent">æœåŠ¡æ¡æ¬¾</a></p>
        </div>
    </footer>

    <!-- API Integration Script -->
    <script>
        /**
         * å¯èˆªç•™å­¦ - Frontend API Integration
         * Provides button functionality to call backend scraping APIs
         */

        // Toast notification helper
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        // Check if backend is available
        async function checkBackendHealth() {
            try {
                const response = await fetch('/api/health');
                return response.ok;
            } catch {
                return false;
            }
        }

        /**
         * Scrape a URL and export to Excel
         * @param {string} url - Website URL to scrape
         * @param {string} filename - Excel filename
         */
        async function scrapeToExcel(url, filename = 'scraped_data') {
            showToast('å¼€å§‹æŠ“å–ç½‘é¡µå†…å®¹...', 'loading');
            try {
                const response = await fetch('/api/scrape', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, filename })
                });

                const data = await response.json();
                if (data.success) {
                    showToast(`âœ“ Excelæ–‡ä»¶å·²ä¿å­˜: ${data.path}`, 'success');
                } else {
                    showToast(`âœ— é”™è¯¯: ${data.error}`, 'error');
                }
            } catch (error) {
                showToast(`âœ— ç½‘ç»œé”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        /**
         * Scrape a URL and return JSON
         * @param {string} url - Website URL to scrape
         */
        async function scrapeToJson(url) {
            showToast('å¼€å§‹æŠ“å–ç½‘é¡µå†…å®¹...', 'loading');
            try {
                const response = await fetch('/api/scrape-json', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url })
                });

                const data = await response.json();
                if (data.success) {
                    showToast('âœ“ ç½‘é¡µå†…å®¹å·²è·å–', 'success');
                    console.log('Scraped content:', data.content.substring(0, 200) + '...');
                    return data;
                } else {
                    showToast(`âœ— é”™è¯¯: ${data.error}`, 'error');
                }
            } catch (error) {
                showToast(`âœ— ç½‘ç»œé”™è¯¯: ${error.message}`, 'error');
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', async () => {
            const backendAvailable = await checkBackendHealth();
            console.log('Backend status:', backendAvailable ? 'âœ“ Connected' : 'âœ— Not available');
            
            // Add click handlers to buttons with data-scrape attribute
            document.querySelectorAll('[data-scrape]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const url = btn.dataset.scrapeUrl || 'https://www.hku.hk/c_index.html';
                    const filename = btn.dataset.scrapeFilename || 'scraped_data';
                    scrapeToExcel(url, filename);
                });
            });

            // ===== Auth UI wiring =====
            const sendCodeBtn = document.getElementById('auth-send-code');
            const verifyCodeBtn = document.getElementById('auth-verify-code');
            const registerBtn = document.getElementById('auth-register');
            const loginBtn = document.getElementById('auth-login');
            const resetBtn = document.getElementById('auth-reset');

            if (sendCodeBtn) sendCodeBtn.addEventListener('click', async () => {
                const phone = document.getElementById('auth-phone').value.trim();
                const purpose = document.getElementById('auth-purpose').value;
                try {
                    showToast('å‘é€éªŒè¯ç ...', 'loading');
                    const resp = await fetch('/api/auth/send-code', {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, purpose })
                    });
                    const data = await resp.json();
                    if (data.success) showToast('éªŒè¯ç å·²å‘é€', 'success'); else showToast(data.message || 'å‘é€å¤±è´¥', 'error');
                } catch (e) { showToast(e.message, 'error'); }
            });

            if (verifyCodeBtn) verifyCodeBtn.addEventListener('click', async () => {
                const phone = document.getElementById('auth-phone').value.trim();
                const code = document.getElementById('auth-code').value.trim();
                try {
                    showToast('éªŒè¯ä¸­...', 'loading');
                    const resp = await fetch('/api/auth/verify-code', {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, code })
                    });
                    const data = await resp.json();
                    if (data.success) showToast('éªŒè¯æˆåŠŸ', 'success'); else showToast(data.message || 'éªŒè¯å¤±è´¥', 'error');
                } catch (e) { showToast(e.message, 'error'); }
            });

            if (registerBtn) registerBtn.addEventListener('click', async () => {
                const phone = document.getElementById('auth-phone').value.trim();
                const code = document.getElementById('auth-code').value.trim();
                const password = document.getElementById('auth-password').value;
                const idCard = document.getElementById('auth-idcard').value.trim();
                const idCardName = document.getElementById('auth-idname').value.trim();
                try {
                    showToast('æ³¨å†Œä¸­...', 'loading');
                    const resp = await fetch('/api/auth/register', {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, code, password, idCard, idCardName })
                    });
                    const data = await resp.json();
                    if (data.success) showToast('æ³¨å†ŒæˆåŠŸ', 'success'); else showToast(data.message || 'æ³¨å†Œå¤±è´¥', 'error');
                } catch (e) { showToast(e.message, 'error'); }
            });

            if (loginBtn) loginBtn.addEventListener('click', async () => {
                const phone = document.getElementById('login-phone').value.trim();
                const password = document.getElementById('login-password').value;
                try {
                    showToast('ç™»å½•ä¸­...', 'loading');
                    const resp = await fetch('/api/auth/login', {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, password })
                    });
                    const data = await resp.json();
                    if (data.success) {
                        showToast('ç™»å½•æˆåŠŸ', 'success');
                        localStorage.setItem('auth_token', data.token);
                    } else {
                        showToast(data.message || 'ç™»å½•å¤±è´¥', 'error');
                    }
                } catch (e) { showToast(e.message, 'error'); }
            });

            if (resetBtn) resetBtn.addEventListener('click', async () => {
                const phone = document.getElementById('auth-phone').value.trim();
                const code = document.getElementById('auth-code').value.trim();
                const newPassword = document.getElementById('reset-password').value;
                try {
                    showToast('é‡ç½®å¯†ç ä¸­...', 'loading');
                    const resp = await fetch('/api/auth/reset-password', {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone, code, newPassword })
                    });
                    const data = await resp.json();
                    if (data.success) showToast('å¯†ç é‡ç½®æˆåŠŸ', 'success'); else showToast(data.message || 'é‡ç½®å¤±è´¥', 'error');
                } catch (e) { showToast(e.message, 'error'); }
            });
        });

        // Make functions globally accessible
        window.scrapeToExcel = scrapeToExcel;
        window.scrapeToJson = scrapeToJson;
    </script>

</body>
</html>
